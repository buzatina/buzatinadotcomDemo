<!DOCTYPE html>
<html>
<head>
  <title>Student Vortex</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://www.w3schools.com/lib/w3.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.bundle.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Crimson+Text" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">

  <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script>
  <script src="https://pingendo.com/assets/bootstrap/bootstrap-4.0.0-alpha.6.min.js"></script>

  <style type="text/css">

    ::-webkit-input-placeholder { /* Chrome/Opera/Safari */
      color: pink;
    }
    ::-moz-placeholder { /* Firefox 19+ */
      color: pink;
    }
    :-ms-input-placeholder { /* IE 10+ */
      color: pink;
    }
    :-moz-placeholder { /* Firefox 18- */
      color: pink;
    }

    .selectFont {
        font-family: 'Crimson Text', serif;
    }

    .sideMenu{
      background-color: #d7f9ff;
    }

    .buttonClass{
      background-color: #0092aa;
      color: white;
    }

    .buzablue {
        background-color: #0275d8;
        color: white;
    }

    .card {
        /* Add shadows to create the "card" effect */
        box-shadow: 0 1px 1px 0 rgba(0,0,0,0.2);
        transition: 0.3s;
    }

    .card2 {
        /* Add shadows to create the "card" effect */
        box-shadow: 1px 1px 1px 0 rgba(0,0,0,0.2);
        transition: 0.3s;
    }

    .card1 {
        /* Add shadows to create the "card" effect */
        box-shadow: 0 2px 4px 0 rgba(0,0,0,0.2);
        transition: 0.3s;
    }

    /* On mouse-over, add a deeper shadow */
    .card:hover {
        box-shadow: 0 2px 2px 0 rgba(0,0,0,0.2);
    }

    /* On mouse-over, add a deeper shadow */
    .card:hover1 {
        box-shadow: 0 2px 4px 0 rgba(0,0,0,0.2);
    }

    .blue {
        background-color: #0275d8;
        color: white;
    }

    .sideMenuLinks{
      background-color: #00dbff;
      color: white;
      border: 1px solid #00dbff;
    }

    .registerStyle {
      background-color: #fafeff;
      border: 1px solid #fafeff;
    }

    .bluedark{
      background-color: #002341;
      color: white;
    }

    .font-things {
      font-family: 'Open Sans', sans-serif;
    }

    s.wits-content .sc-item-img {
      margin-bottom: 20px;
    }

    .wits-content {
      padding-top: 50px;
      padding-bottom: 50px;
    }

    .wits-navbar {
      padding-top: 30px;
      padding-bottom: 30px;
      background: #00dbff;
    }

    .wits-navbar .navbar-nav>.active>a {
      background: #3498db;
      color: white;
    }

    .wits-navbar .wits-cart {
      padding-left: 10px;
      border-left: 1px solid #969696;
    }

    .wits-navbar .wits-form-btn {
      margin-right: 7px;
    }

    .wits-navbar .wits-btn-car {
      background: #3498db;
      color: white;
      border-radius: 3px;
    }

    .wits-slider {
      background: #E4E4E4;
      padding-top: 30px;
      padding-bottom: 30px;
      margin-top: -20px;
    }

  </style>

</head>

<body class="font-things">

  <nav class="wits-navbar w3-top navbar navbar-default" style="margin-bottom: 150px; padding-bottom: 0px; z-index: 950;">
      <div class="container" style="margin-top: 3px;">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a href="/"><img src="https://s3-us-west-2.amazonaws.com/buzatina/logo/Student+Vortex.png" style="height: 50px;"></a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
 
          <ul class="nav navbar-nav navbar-right">
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" style="color: white;" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Categories<span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="/books">Books</a></li>
                <li><a href="/mobile">Mobile</a></li>
                <li><a href="/laptops">Laptops</a></li>
                <li><a href="/others">Others</a></li>
              </ul>
            </li>
            <li><a class="btn buttonClass" style="margin: 3px; color: white;" href="/users/register">Sign Up</a></li>
            <li><a class="btn buttonClass" style="margin: 3px; color: white;" href="/users/login">Login</a></li>
            <li><button class="btn buttonClass" data-toggle="modal" data-target="#addproduct" style="height: 55px; color: white;">Add product</button></li>
          </ul>

          <form class="navbar-form navbar-right">
            <div class="form-group">
              <input type="text" class="form-control" placeholder="search for books, laptops, mobiles, ..." style="background-color: #d7f9ff; color: #0092aa; border-radius: 5px; border: 1px solid #d7f9ff; width: 300px;">
            </div>
          </form>


        </div><!-- /.navbar-collapse -->

      </div><!-- /.container-fluid --> 
  </nav>     

      {{{body}}} 

        <!-- Add A product Modal -->
        <div id="addproduct" class="modal fade" role="dialog" style="font-size: 12px;">
          <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
              <div class="modal-body">
                <form id="productForm">
                  <div class="form-group"><label class="darkColors">Title:</label><input type="text" class="form-control" placeholder="Title" id="title"></div>
                  <div class="form-group"><label class="darkColors">Varsity:</label><input type="text" class="form-control" placeholder="Varsity" id="varsity"></div>
                  <div class="form-group"><label class="darkColors">Campus:</label><input type="text" class="form-control" placeholder="Campus" id="campus"></div>
                  <div class="form-group"><label class="darkColors">About:</label><input type="text" class="form-control" placeholder="About" id="about"></div>
                  <div class="form-group"><label class="darkColors">Asking Price (Rands):</label><input type="text" class="form-control" placeholder="Asking Price" id="askPrice"></div>
                  <div class="form-group">
                  <label class="darkColors">Category:</label>
                    <select id="category">
                      <option value="books">Books</option>
                      <option value="laptops">Laptops</option>
                      <option value="mobile">Mobile</option>
                      <option value="others">Others</option>
                    </select>
                  </div>
                  <div class="form-group"><label class="darkColors">Select Image:</label><input type="file" class="form-control" placeholder="Type" id="file" accept='image/*' required></div> 
                  <button type="submit" id="productSubmitButton" class="btn btn-block" style="background-color: #00dbff; color: white;">Add Bid</button>
                </form>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              </div>
            </div>

          </div>
        </div>

  <script>

    var socket = io.connect('https://studentvortex.herokuapp.com/');

    $("#productForm").submit(function(e){
      
      e.preventDefault();

      console.log($("#file")[0].files[0]);
      
      console.log('The productForm was clicked boi');
      
      var productData = {file: $("#file")[0].files[0], actualFileType: $("#file")[0].files[0].type, fileName: $("#file")[0].files[0].name, title: $("#title").val(), varsity: $("#varsity").val(), campus: $("#campus").val(), about: $("#about").val(), category: $("#category").val(), askPrice: $("#askPrice").val()};
      
      console.log(productData);

      socket.emit('newproduct', productData);
      $("#productSubmitButton").val("Loading...");
      $("#productSubmitButton").prop("disabled",true);

    });

    socket.on('saved', function (data) {

      window.location.assign("https://studentvortex.herokuapp.com/");

    });

  </script>

</body>

</html>